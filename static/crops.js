(()=>{"use strict";const e=JSON.parse('[{"name":"Blue Jazz","season":"Spring","seed_cost":30,"sell_price":50,"days_to_grow":7},{"name":"Carrot","season":"Spring","seed_cost":0,"sell_price":35,"days_to_grow":3},{"name":"Cauliflower","season":"Spring","seed_cost":80,"sell_price":175,"days_to_grow":12},{"name":"Coffee Bean","season":"Spring","seed_cost":15,"sell_price":15,"days_to_grow":10,"regrowth_period":2,"yield":4,"percent_chance_extra":2},{"name":"Garlic","season":"Spring","seed_cost":40,"sell_price":60,"days_to_grow":4},{"name":"Green Bean","season":"Spring","seed_cost":60,"sell_price":40,"days_to_grow":10,"regrowth_period":3},{"name":"Kale","season":"Spring","seed_cost":70,"sell_price":110,"days_to_grow":6},{"name":"Parsnip","season":"Spring","seed_cost":20,"sell_price":35,"days_to_grow":4},{"name":"Potato","season":"Spring","seed_cost":50,"sell_price":80,"days_to_grow":6,"percent_chance_extra":25},{"name":"Rhubarb","season":"Spring","seed_cost":100,"sell_price":220,"days_to_grow":13},{"name":"Rice","season":"Spring","seed_cost":40,"sell_price":30,"days_to_grow":6},{"name":"Strawberry","season":"Spring","seed_cost":100,"sell_price":120,"days_to_grow":8,"regrowth_period":4,"percent_chance_extra":2},{"name":"Tulip","season":"Spring","seed_cost":20,"sell_price":30,"days_to_grow":6}]');var t;function r(e,r){var o,s,n,a,l;let i=28-r,_=0,c=0;if(i>=e.days_to_grow&&(_+=1,c+=e.days_to_grow,e.regrowth_period)){let t=Math.floor((i-e.days_to_grow)/e.regrowth_period);_+=t,c+=t*e.regrowth_period}let d=_*(null!==(o=e.yield)&&void 0!==o?o:1)+(null!==(s=e.percent_chance_extra)&&void 0!==s?s:0)/100,p=d*e.sell_price-e.seed_cost,u=p/c;return{name:e.name,season:t.fromString(e.season),seed_cost:e.seed_cost,sell_price:e.sell_price,days_to_grow:e.days_to_grow,regrowth_period:null!==(n=e.regrowth_period)&&void 0!==n?n:null,yield:null!==(a=e.yield)&&void 0!==a?a:null,percent_chance_extra:null!==(l=e.percent_chance_extra)&&void 0!==l?l:null,useful_days:c,num_harvests:_,num_crops:d,profit:p,daily_profit:u}}!function(e){e[e.SPRING=0]="SPRING",e[e.SUMMER=1]="SUMMER",e[e.FALL=2]="FALL"}(t||(t={})),function(e){e.fromString=function(t){switch(t.toUpperCase()){case"SPRING":return e.SPRING;case"SUMMER":return e.SUMMER;case"FALL":return e.FALL;default:throw new Error(`Unknown season ${t}`)}}}(t||(t={}));const o=[["Name",e=>e.name],["Season",e=>t[e.season]],["Seed Cost",e=>e.seed_cost.toString()],["Sell Price",e=>e.sell_price.toString()],["Days to Grow",e=>e.days_to_grow.toString()],["Regrowth Period",e=>{var t,r;return null!==(r=null===(t=e.regrowth_period)||void 0===t?void 0:t.toString())&&void 0!==r?r:"-"}],["Yield",e=>{var t;let r=null!==(t=e.yield)&&void 0!==t?t:1;return e.percent_chance_extra?`${r} + ${e.percent_chance_extra}%`:r.toString()}],["Useful Days",e=>e.useful_days.toString()],["Num Harvests",e=>e.num_harvests.toString()],["Num Crops",e=>{let t=e.num_crops;return Number.isInteger(t)?t.toString():e.num_crops.toFixed(2)}],["Profit",e=>e.profit.toFixed(2)],["Daily Profit",e=>Number.isFinite(e.daily_profit)?e.daily_profit.toFixed(2):"-"]];class s{constructor(e,t){this.data=t,this.row=e;for(let[e,t]of o){let e=t(this.data);this.row.insertCell().appendChild(document.createTextNode(e))}}}class n{constructor(e){this.table=e,this.rows=[],this.recalculate(1)}recalculate(t){this.table.replaceChildren();let n=this.table.createTHead().insertRow();for(let[e,t]of o)n.insertCell().appendChild(document.createTextNode(e));let a=this.table.createTBody();for(let o of e){let e=r(o,t),n=a.insertRow();this.rows.push(new s(n,e))}}}function a(){console.log("Initializing!");let e=document.getElementById("crop-table");if(!(e instanceof HTMLTableElement))throw new Error("crop-table should be a <table>");let t=document.getElementById("input-panel"),r=document.querySelector("#day"),o=new n(e);t.addEventListener("change",(e=>{let t=r.valueAsNumber;o.recalculate(t)}))}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",a):a()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4vLyBzaG91bGQgaSBwdWxsIHRoaXMgZnJvbSBhIEpTT04gbGlrZSBpJ20gZG9pbmcgbm93PyBvciBzaG91bGQgaSBqdXN0XHJcbi8vIGhhcmQtY29kZSBpdCBpbmxpbmUgKG1pZ2h0IGJlIG1vcmUgcmVhZGFibGUpXHJcbmltcG9ydCBDUk9QX0RFRklOSVRJT05TIGZyb20gXCIuL2Nyb3BzLmpzb25cIjtcclxuXHJcbi8qID09PT09PT09IENBTENVTEFUSU9OID09PT09PT09ICovXHJcblxyXG50eXBlIENyb3BEZWZpbml0aW9uID0gdHlwZW9mIENST1BfREVGSU5JVElPTlNbbnVtYmVyXTtcclxuXHJcbmVudW0gU2Vhc29uIHtcclxuICAgIFNQUklORywgU1VNTUVSLCBGQUxMXHJcbn1cclxuXHJcbm5hbWVzcGFjZSBTZWFzb24ge1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGZyb21TdHJpbmcoczogc3RyaW5nKTogU2Vhc29uIHtcclxuICAgICAgICBzd2l0Y2ggKHMudG9VcHBlckNhc2UoKSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiU1BSSU5HXCI6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gU2Vhc29uLlNQUklORztcclxuICAgICAgICAgICAgY2FzZSBcIlNVTU1FUlwiOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFNlYXNvbi5TVU1NRVI7XHJcbiAgICAgICAgICAgIGNhc2UgXCJGQUxMXCI6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gU2Vhc29uLkZBTEw7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gc2Vhc29uICR7c31gKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbnR5cGUgQ3JvcERhdGEgPSB7XHJcbiAgICBuYW1lOiBzdHJpbmcsXHJcbiAgICBzZWFzb246IFNlYXNvbixcclxuICAgIHNlZWRfY29zdDogbnVtYmVyLFxyXG4gICAgc2VsbF9wcmljZTogbnVtYmVyLFxyXG4gICAgZGF5c190b19ncm93OiBudW1iZXIsXHJcbiAgICByZWdyb3d0aF9wZXJpb2Q6IG51bWJlciB8IG51bGwsXHJcbiAgICB5aWVsZDogbnVtYmVyIHwgbnVsbCxcclxuICAgIHBlcmNlbnRfY2hhbmNlX2V4dHJhOiBudW1iZXIgfCBudWxsLFxyXG4gICAgdXNlZnVsX2RheXM6IG51bWJlcixcclxuICAgIG51bV9oYXJ2ZXN0czogbnVtYmVyLFxyXG4gICAgbnVtX2Nyb3BzOiBudW1iZXIsXHJcbiAgICBwcm9maXQ6IG51bWJlcixcclxuICAgIGRhaWx5X3Byb2ZpdDogbnVtYmVyLFxyXG59O1xyXG5cclxuZnVuY3Rpb24gY2FsY3VsYXRlKGNyb3A6IENyb3BEZWZpbml0aW9uLCBzdGFydF9kYXk6IG51bWJlcik6IENyb3BEYXRhIHtcclxuICAgIGxldCBkYXlzX2xlZnQgPSAyOCAtIHN0YXJ0X2RheTsgIC8vIHBsYW50aW5nIG9uIGRheSAyOCBpcyB6ZXJvIGRheXMgbGVmdFxyXG5cclxuICAgIC8vIFdoYXQncyB0aGUgcHJvZml0PyBEZXBlbmRzIGhvdyBtYW55IGhhcnZlc3RzIHdlIGNhbiBnZXQgdGhpcyBzZWFzb24uXHJcbiAgICBsZXQgbnVtX2hhcnZlc3RzID0gMDtcclxuICAgIGxldCB1c2VmdWxfZGF5cyA9IDA7XHJcbiAgICBpZiAoZGF5c19sZWZ0ID49IGNyb3AuZGF5c190b19ncm93KSB7XHJcbiAgICAgICAgbnVtX2hhcnZlc3RzICs9IDE7XHJcbiAgICAgICAgdXNlZnVsX2RheXMgKz0gY3JvcC5kYXlzX3RvX2dyb3c7XHJcbiAgICAgICAgaWYgKGNyb3AucmVncm93dGhfcGVyaW9kKSB7XHJcbiAgICAgICAgICAgIGxldCBleHRyYV9oYXJ2ZXN0cyA9IE1hdGguZmxvb3IoKGRheXNfbGVmdCAtIGNyb3AuZGF5c190b19ncm93KSAvIGNyb3AucmVncm93dGhfcGVyaW9kKTtcclxuICAgICAgICAgICAgbnVtX2hhcnZlc3RzICs9IGV4dHJhX2hhcnZlc3RzO1xyXG4gICAgICAgICAgICB1c2VmdWxfZGF5cyArPSBleHRyYV9oYXJ2ZXN0cyAqIGNyb3AucmVncm93dGhfcGVyaW9kO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBXZSBjYW4gc29tZXRpbWVzIGdldCBtdWx0aXBsZSBjcm9wcyBwZXIgaGFydmVzdFxyXG4gICAgbGV0IG51bV9jcm9wcyA9IG51bV9oYXJ2ZXN0cyAqIChjcm9wLnlpZWxkID8/IDEpICsgKChjcm9wLnBlcmNlbnRfY2hhbmNlX2V4dHJhID8/IDApIC8gMTAwKTtcclxuXHJcbiAgICBsZXQgcHJvZml0ID0gbnVtX2Nyb3BzICogY3JvcC5zZWxsX3ByaWNlIC0gY3JvcC5zZWVkX2Nvc3Q7XHJcbiAgICBsZXQgZGFpbHlfcHJvZml0ID0gcHJvZml0IC8gdXNlZnVsX2RheXM7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuYW1lOiBjcm9wLm5hbWUsXHJcbiAgICAgICAgc2Vhc29uOiBTZWFzb24uZnJvbVN0cmluZyhjcm9wLnNlYXNvbiksXHJcbiAgICAgICAgc2VlZF9jb3N0OiBjcm9wLnNlZWRfY29zdCxcclxuICAgICAgICBzZWxsX3ByaWNlOiBjcm9wLnNlbGxfcHJpY2UsXHJcbiAgICAgICAgZGF5c190b19ncm93OiBjcm9wLmRheXNfdG9fZ3JvdyxcclxuICAgICAgICByZWdyb3d0aF9wZXJpb2Q6IGNyb3AucmVncm93dGhfcGVyaW9kID8/IG51bGwsXHJcbiAgICAgICAgeWllbGQ6IGNyb3AueWllbGQgPz8gbnVsbCxcclxuICAgICAgICBwZXJjZW50X2NoYW5jZV9leHRyYTogY3JvcC5wZXJjZW50X2NoYW5jZV9leHRyYSA/PyBudWxsLFxyXG4gICAgICAgIHVzZWZ1bF9kYXlzLFxyXG4gICAgICAgIG51bV9oYXJ2ZXN0cyxcclxuICAgICAgICBudW1fY3JvcHMsXHJcbiAgICAgICAgcHJvZml0LFxyXG4gICAgICAgIGRhaWx5X3Byb2ZpdCxcclxuICAgIH07XHJcbn1cclxuXHJcbi8qID09PT09PT09IEdVSSA9PT09PT09PSAqL1xyXG5cclxuLy8gRGVmaW5lcyB0aGUgc2V0IG9mIGNvbHVtbnMgZm9yIHRoZSB3aG9sZSB0YWJsZS5cclxudHlwZSBDb2x1bW4gPSBbc3RyaW5nLCAoKGNyb3A6IENyb3BEYXRhKSA9PiBzdHJpbmcpXTtcclxuY29uc3QgQ09MVU1OUzogQ29sdW1uW10gPSBbXHJcbiAgICBbXCJOYW1lXCIsIChjcm9wOiBDcm9wRGF0YSkgPT4geyByZXR1cm4gY3JvcC5uYW1lOyB9XSxcclxuICAgIFtcIlNlYXNvblwiLCAoY3JvcDogQ3JvcERhdGEpID0+IHtcclxuICAgICAgICByZXR1cm4gU2Vhc29uW2Nyb3Auc2Vhc29uXTtcclxuICAgIH1dLFxyXG4gICAgW1wiU2VlZCBDb3N0XCIsIChjcm9wOiBDcm9wRGF0YSkgPT4geyByZXR1cm4gY3JvcC5zZWVkX2Nvc3QudG9TdHJpbmcoKTsgfV0sXHJcbiAgICBbXCJTZWxsIFByaWNlXCIsIChjcm9wOiBDcm9wRGF0YSkgPT4geyByZXR1cm4gY3JvcC5zZWxsX3ByaWNlLnRvU3RyaW5nKCk7IH1dLFxyXG4gICAgW1wiRGF5cyB0byBHcm93XCIsIChjcm9wOiBDcm9wRGF0YSkgPT4geyByZXR1cm4gY3JvcC5kYXlzX3RvX2dyb3cudG9TdHJpbmcoKTsgfV0sXHJcbiAgICBbXCJSZWdyb3d0aCBQZXJpb2RcIiwgKGNyb3A6IENyb3BEYXRhKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGNyb3AucmVncm93dGhfcGVyaW9kPy50b1N0cmluZygpID8/IFwiLVwiO1xyXG4gICAgfV0sXHJcbiAgICBbXCJZaWVsZFwiLCAoY3JvcDogQ3JvcERhdGEpID0+IHtcclxuICAgICAgICBsZXQgeWllbGRfbnVtID0gY3JvcC55aWVsZCA/PyAxO1xyXG4gICAgICAgIGlmIChjcm9wLnBlcmNlbnRfY2hhbmNlX2V4dHJhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBgJHt5aWVsZF9udW19ICsgJHtjcm9wLnBlcmNlbnRfY2hhbmNlX2V4dHJhfSVgO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB5aWVsZF9udW0udG9TdHJpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICB9XSxcclxuICAgIFtcIlVzZWZ1bCBEYXlzXCIsIChjcm9wOiBDcm9wRGF0YSkgPT4geyByZXR1cm4gY3JvcC51c2VmdWxfZGF5cy50b1N0cmluZygpOyB9XSxcclxuICAgIFtcIk51bSBIYXJ2ZXN0c1wiLCAoY3JvcDogQ3JvcERhdGEpID0+IHsgcmV0dXJuIGNyb3AubnVtX2hhcnZlc3RzLnRvU3RyaW5nKCk7IH1dLFxyXG4gICAgW1wiTnVtIENyb3BzXCIsIChjcm9wOiBDcm9wRGF0YSkgPT4ge1xyXG4gICAgICAgIGxldCBudW1fY3JvcHMgPSBjcm9wLm51bV9jcm9wcztcclxuICAgICAgICBpZiAoTnVtYmVyLmlzSW50ZWdlcihudW1fY3JvcHMpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudW1fY3JvcHMudG9TdHJpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNyb3AubnVtX2Nyb3BzLnRvRml4ZWQoMik7XHJcbiAgICB9XSxcclxuICAgIFtcIlByb2ZpdFwiLCAoY3JvcDogQ3JvcERhdGEpID0+IHsgcmV0dXJuIGNyb3AucHJvZml0LnRvRml4ZWQoMik7IH1dLFxyXG4gICAgW1wiRGFpbHkgUHJvZml0XCIsIChjcm9wOiBDcm9wRGF0YSkgPT4ge1xyXG4gICAgICAgIGlmIChOdW1iZXIuaXNGaW5pdGUoY3JvcC5kYWlseV9wcm9maXQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjcm9wLmRhaWx5X3Byb2ZpdC50b0ZpeGVkKDIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gXCItXCI7XHJcbiAgICB9XVxyXG5dO1xyXG5cclxuY2xhc3MgQ3JvcFJvdyB7XHJcbiAgICBkYXRhOiBDcm9wRGF0YTtcclxuICAgIHJvdzogSFRNTFRhYmxlUm93RWxlbWVudDtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihyb3c6IEhUTUxUYWJsZVJvd0VsZW1lbnQsIGRhdGE6IENyb3BEYXRhKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcclxuICAgICAgICB0aGlzLnJvdyA9IHJvdztcclxuXHJcbiAgICAgICAgLy8gbm93IHBvcHVsYXRlIHRoZSByb3dcclxuICAgICAgICBmb3IgKGxldCBbXywgY29sX2F0dHJdIG9mIENPTFVNTlMpIHtcclxuICAgICAgICAgICAgbGV0IHZhbHVlID0gY29sX2F0dHIodGhpcy5kYXRhKTtcclxuICAgICAgICAgICAgdGhpcy5yb3cuaW5zZXJ0Q2VsbCgpLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHZhbHVlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBDcm9wVGFibGUge1xyXG4gICAgdGFibGU6IEhUTUxUYWJsZUVsZW1lbnQ7XHJcbiAgICByb3dzOiBDcm9wUm93W107XHJcblxyXG4gICAgY29uc3RydWN0b3IodGFibGU6IEhUTUxUYWJsZUVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLnRhYmxlID0gdGFibGU7XHJcbiAgICAgICAgdGhpcy5yb3dzID0gW107XHJcblxyXG4gICAgICAgIHRoaXMucmVjYWxjdWxhdGUoMSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlY2FsY3VsYXRlKGN1cnJlbnRfZGF5OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnRhYmxlLnJlcGxhY2VDaGlsZHJlbigpO1xyXG5cclxuICAgICAgICAvLyBUYWJsZSBoZWFkZXJcclxuICAgICAgICBsZXQgdGhlYWQgPSB0aGlzLnRhYmxlLmNyZWF0ZVRIZWFkKCk7XHJcbiAgICAgICAgbGV0IHJvdyA9IHRoZWFkLmluc2VydFJvdygpO1xyXG4gICAgICAgIGZvciAobGV0IFtjb2xfbmFtZSwgX10gb2YgQ09MVU1OUykge1xyXG4gICAgICAgICAgICByb3cuaW5zZXJ0Q2VsbCgpLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNvbF9uYW1lKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdGJvZHkgPSB0aGlzLnRhYmxlLmNyZWF0ZVRCb2R5KCk7XHJcbiAgICAgICAgZm9yIChsZXQgZGVmIG9mIENST1BfREVGSU5JVElPTlMpIHtcclxuICAgICAgICAgICAgbGV0IGRhdGEgPSBjYWxjdWxhdGUoZGVmLCBjdXJyZW50X2RheSk7XHJcbiAgICAgICAgICAgIGxldCByb3cgPSB0Ym9keS5pbnNlcnRSb3coKTtcclxuICAgICAgICAgICAgdGhpcy5yb3dzLnB1c2gobmV3IENyb3BSb3cocm93LCBkYXRhKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBpbml0aWFsaXplKCkge1xyXG4gICAgY29uc29sZS5sb2coXCJJbml0aWFsaXppbmchXCIpO1xyXG5cclxuICAgIC8vIEZpbmQgYWxsIHRoZSBlbGVtZW50cyBJIG5lZWRcclxuICAgIGxldCB0YWJsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY3JvcC10YWJsZVwiKTtcclxuICAgIGlmICghKHRhYmxlIGluc3RhbmNlb2YgSFRNTFRhYmxlRWxlbWVudCkpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjcm9wLXRhYmxlIHNob3VsZCBiZSBhIDx0YWJsZT5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGlucHV0X3BhbmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbnB1dC1wYW5lbFwiKSE7XHJcbiAgICBsZXQgY3VycmVudF9kYXlfaW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KFwiI2RheVwiKSE7XHJcblxyXG4gICAgLy8gQ3JlYXRlIGNvbXBvbmVudHNcclxuICAgIGxldCB0YWJsZV9jb21wb25lbnQgPSBuZXcgQ3JvcFRhYmxlKHRhYmxlKTtcclxuXHJcbiAgICAvLyBBdHRhY2ggZXZlbnQgbGlzdGVuZXJzXHJcbiAgICBpbnB1dF9wYW5lbC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIChldmVudCkgPT4ge1xyXG4gICAgICAgIGxldCBjdXJyZW50X2RheSA9IGN1cnJlbnRfZGF5X2lucHV0LnZhbHVlQXNOdW1iZXI7XHJcbiAgICAgICAgdGFibGVfY29tcG9uZW50LnJlY2FsY3VsYXRlKGN1cnJlbnRfZGF5KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5cclxuLy8gQWxyaWdodHksIHdlJ3JlIHJlYWR5IHRvIGdvISBXYWl0IGZvciB0aGUgRE9NIHRvIGZpbmlzaCBsb2FkaW5nIChvciBzZWUgaWYgaXRcclxuLy8gYWxyZWFkeSBoYXMuXHJcbmlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSBcImxvYWRpbmdcIikge1xyXG4gICAgLy8gTG9hZGluZyBoYXNuJ3QgZmluaXNoZWQgeWV0XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBpbml0aWFsaXplKTtcclxufSBlbHNlIHtcclxuICAgIC8vIGBET01Db250ZW50TG9hZGVkYCBoYXMgYWxyZWFkeSBmaXJlZFxyXG4gICAgaW5pdGlhbGl6ZSgpO1xyXG59Il0sIm5hbWVzIjpbIlNlYXNvbiIsImNhbGN1bGF0ZSIsImNyb3AiLCJzdGFydF9kYXkiLCJkYXlzX2xlZnQiLCJudW1faGFydmVzdHMiLCJ1c2VmdWxfZGF5cyIsImRheXNfdG9fZ3JvdyIsInJlZ3Jvd3RoX3BlcmlvZCIsImV4dHJhX2hhcnZlc3RzIiwiTWF0aCIsImZsb29yIiwibnVtX2Nyb3BzIiwieWllbGQiLCJwZXJjZW50X2NoYW5jZV9leHRyYSIsInByb2ZpdCIsInNlbGxfcHJpY2UiLCJzZWVkX2Nvc3QiLCJkYWlseV9wcm9maXQiLCJuYW1lIiwic2Vhc29uIiwiZnJvbVN0cmluZyIsInMiLCJ0b1VwcGVyQ2FzZSIsIlNQUklORyIsIlNVTU1FUiIsIkZBTEwiLCJFcnJvciIsIkNPTFVNTlMiLCJ0b1N0cmluZyIsInlpZWxkX251bSIsIk51bWJlciIsImlzSW50ZWdlciIsInRvRml4ZWQiLCJpc0Zpbml0ZSIsIkNyb3BSb3ciLCJjb25zdHJ1Y3RvciIsInJvdyIsImRhdGEiLCJ0aGlzIiwiXyIsImNvbF9hdHRyIiwidmFsdWUiLCJpbnNlcnRDZWxsIiwiYXBwZW5kQ2hpbGQiLCJkb2N1bWVudCIsImNyZWF0ZVRleHROb2RlIiwiQ3JvcFRhYmxlIiwidGFibGUiLCJyb3dzIiwicmVjYWxjdWxhdGUiLCJjdXJyZW50X2RheSIsInJlcGxhY2VDaGlsZHJlbiIsImNyZWF0ZVRIZWFkIiwiaW5zZXJ0Um93IiwiY29sX25hbWUiLCJ0Ym9keSIsImNyZWF0ZVRCb2R5IiwiZGVmIiwicHVzaCIsImluaXRpYWxpemUiLCJjb25zb2xlIiwibG9nIiwiZ2V0RWxlbWVudEJ5SWQiLCJIVE1MVGFibGVFbGVtZW50IiwiaW5wdXRfcGFuZWwiLCJjdXJyZW50X2RheV9pbnB1dCIsInF1ZXJ5U2VsZWN0b3IiLCJ0YWJsZV9jb21wb25lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJ2YWx1ZUFzTnVtYmVyIiwicmVhZHlTdGF0ZSJdLCJzb3VyY2VSb290IjoiIn0=